#Features (reworked definition)
Mit diesem File soll begonnen werden, alle bislang besprochenen Features auf den Prüfstand zu stellen.
Das Ziel ist, zu bewerten, ob ein Projektneustart auch auf Ebene der Codebase notwendig wird.
Die Features werden nach Themenbereichen gruppiert. Die atomarste Ebene ist ein ausführbares Cucumber-Feature.

**Version notes**

2011-03-20	FT	initial brainstorming list aller features, die mir so eingefallen sind. Muss noch auf cucumber style gebracht werden.

-------------------------------------------------


##Setup

###Qualifikationen verwalten
- Als Planer möchte ich für meinen Account Qualifikationen anlegen um diese später Mitarbeitern und Arbeitsplätzen
  zuordnen zu können.
- Als Planer möchte ich die Qualifikationen meines Accounts ändern können.
- Als Planer möchte ich die Qualifikationen meines Accounts deaktivieren können.
  - Aus Konsistenzgründen ist ein Löschen nicht möglich.
  - Bereits verwendete Qualifikationen werden normal angezeigt aber als deaktiv markiert.
  - Für neue Pläne stehen die deaktivierten Qualifikationen nicht mehr zur Verfügung (nicht angezeigt).
  - In Plan-Templates verwendete deaktivierte Qualifikationen werden nicht mitkopiert, stattdessen wird ein Platzhalter/Deaktivsymbol angezeigt
  - Plan-/Template-Owner werden über die Deaktivierung informiert

###Mitarbeiter/Benutzer/Rollen verwalten
**Mitarbeiter**

- Als Planer möchte ich Mitarbeiter meines Accounts mit ihren Qualifikationen (ref. Quali) anlegen.
  - Folgende Daten werden benötigt: Vorname, Name, Aktiv=Ja
  - Folgende Daten sind optional: Geburtsdatum, Adresse, Telefon, E-Mail
- Als Planer möchte ich einem Mitarbeiter meines Accounts ein Foto zuordnen können.
  - Bei dem Foto hat der Planer die Auswahl zwischen Upload oder Gravatar
  - Wenn Gravatar, muss E-Mail gefüllt sein.
  - Wenn Upload, öffnet sich ein eigener Dialog zum Upload eines Mitarbeiter-Fotos.
- Als Planer möchte ich Mitarbeiter meines Accounts ändern.
- Als Planer möchte ich einen Mitarbeiter meines Accounts deaktivieren können.
  - Aus Konsistenzgründen ist ein Löschen nicht möglich.
  - Wenn es einen Benutzer für diesen Mitarbeiter gibt, wird dieser für diesen Account deaktiviert (Benutzer kann zu mehreren Accounts gehören)
  - Bereits verwendete Mitarbeiter werden normal angezeigt aber als deaktiv markiert.
  - Für neue Pläne stehen die deaktivierten Mitarbeiter nicht mehr zur Verfügung (nicht angezeigt).
  - In Plan-Templates verwendete deaktivierte Mitarbeiter werden nicht mitkopiert, stattdessen wird ein Platzhalter/Deaktivsymbol angezeigt.
  - Plan-/Template-Owner werden über die Deaktivierung informiert
- Als Planer möchte ich Mitarbeiter per Import einer CSV-Datei verwalten.
  - Die CSV-Datei muss einer definierten Strukturvorlage entsprechen.
  - Bestehende Mitarbeiter können als CSV-Datei entsprechend der Strukturvorlage exportiert werden.
  - Jeder Mitarbeiter wird über ein eindeutiges Token, das Teil der Strukturvorlage ist, identifiziert.
      - ist kein Token angegeben wird der Mitarbeiter angelegt
      - ist ein Token angegeben und ein Mitarbeiter mit diesem Token existiert, wird der Mitarbeiter aktualisiert.
      - ist ein Token angegeben und kein Mitarbeiter mit diesem Token existiert, wird der Import abgelehnt.

  - In Zukunft soll auch über den Import das Verwalten von Mitarbeitern als Benutzer gesteuert werden (z.Bsp. über eine Spalte in der Strukturvorlage "Benutzer Ja/Nein")

**Benutzer**

- Als Planer möchte ich einen Mitarbeiter als Benutzer zu meinem Account hinzufügen.
  - Dies kann zum einen während des Anlegens eines Mitarbeiters erfolgen.
  - Dies kann auf der anderen Seite auch nachträglich passieren.
  - Dem Benutzer wird eine Einladung per E-Mail mit Bestätigungslink zugesandt (Double Opt-In).
  - Als Benutzername wird die E-Mail verwendet.
  - Wenn es einen Benutzer mit der angegebenen Email bereits gibt, wird dieser lediglich dem Account und Mitarbeiter zugeordnet und erhält eine Nachricht
- Als Planer möchte ich einen Benutzer meines Accounts deaktivieren.
- Als Benutzer möchte ich mein Passwort ändern und bekomme eine Benachrichtigung.
- Als Benutzer möchte ich meine E-Mail ändern und bekomme eine Benachrichtigung (eventuelles Double Opt-In).
  - Der Benutzer kann dabei entscheiden, für welche Accounts die Mitarbeiter-E-Mail geändert werden soll.
  - Wenn es nur eine Account-Zuordnung gibt, wird die MitarbeiterE-Mail automatisch mit geändert.
- Als Benutzer möchte ich mir eine E-Mail mit einem neuen Passwort zuschicken lassen (Passwort vergessen Funktion).

**Login**

- Als Benutzer möchte ich mich bei shiftplan anmelden/login.
  - Startseite (Landingpage=www)
    - Szenario 1:
      - Ich gebe in ein Formularfeld die Subdomain ein und werde auf die Account-bezogene Login-Page weitergeleitet.
      - Wenn ich meine Subdomains vergessen habe, kann ich mir eine Liste per Mail zuschicken lassen.
    - Szenario 2:
      - Nachdem ich mich erfolgreich mit meinem Benutzernamen und Passwort angemeldet habe, werde ich:
        - direkt auf das Dashboard meines Accounts weitergeleitet, falls ich nur einem Account zugeordnet bin.
        - aufgefordert unter meinen Accounts einen auszuwählen.
  - Account-Subdomain
    - Nachdem ich mich erfolgreich mit meinem Benutzernamen und Passwort angemeldet habe, werde ich direkt auf das Dashboard meines Accounts weitergeleitet, falls ich nur einem Account zugeordnet bin.
- Als Benutzer beende ich meine Session durch Logout und lande auf der Login-Seite des aktuellen Accounts.
- Als angemeldeter Benutzer möchte ich meinen Account wechseln können ohne mich davor ausloggen zu müssen.

**Rollen**

- In Zukunft soll es ein Rollenkonzept geben.
- Es sind nur drei Rollen für Benutzer vorgesehen:
  - Mitarbeiter -> einfacher Mitarbeiter, der sein Profil und seine Verfügbarkeiten pflegt
  - Planer -> vom Admin bestimmte User, die Pläne bearbeiten dürfen
  - Admin -> der Account-Admin und gleichzeitig auch Planer
- Als Planer möchte ich meinen Benutzern Rollen zuweisen.
- Solange diese Funktionalität nicht definiert ist, kann jeder Benutzer alles machen.

###Arbeits- oder Einsatzplätze

- Als Planer möchte ich für meinen Account Arbeitsplätze anlegen, um diese später bei der Planung verwenden zu können.
  - Der Planer kann für einen Arbeisplatz die Standardschichtlänge und die Standardbesetzung definieren.
    Beispiel für Arbeitsplatz "Küche":
	  - Standardschichtlänge: 480 Min
	  - Standardbesetzung: 1 Koch und 2 Küchenhilfen (wobei Koch und Küchenhilfe Qualifikationen meines Accounts sind)
- Als Planer möchte ich die Arbeitsplätze meines Accounts ändern können.
- Als Planer möchte ich die Arbeitsplätze meines Accounts deaktivieren können.
  - Aus Konsistenzgründen ist ein Löschen nicht möglich.
  - Bereits verwendete Qualifikationen werden normal angezeigt aber als deaktiv markiert.
  - Für neue Pläne stehen die deaktivierten Arbeitsplätze nicht mehr zur Verfügung (nicht angezeigt).
  - In Plan-Templates verwendete deaktivierte Arbeitsplätze werden nicht mitkopiert, stattdessen wird ein Platzhalter/Deaktivsymbol angezeigt
  - Plan-/Template-Owner werden über die Deaktivierung informiert


##Verfügbarkeiten

- Als Benutzer möchte ich meine Standardverfügbarkeiten für jeden Wochentag definieren können.
- Als Benutzer möchte ich zusätzlich meine Standardverfügbarkeiten durch dedizierte Verfügbarkeiten/Nichtverfügbarkeiten
  überschreiben können.
  - Eine Kalenderansicht unterstützt den Benutzer hierbei.

##Schichtpläne

###Pläne

- Als Planer möchte ich für meinen Account Schichtpläne verwalten.
  - Es wird das Start- und das Enddatum sowie Start- und Endzeitpunkt eingetragen.
  - Start- und Endzeitpunkt definiert die Schichtlänge für jeden Arbeitstag des Plangeltungszeitraums
- Als Benutzer möchte ich Pläne ausdrucken und speichern können.
  - Export im PDF Format
- Als Benutzer möchte ich mir alle aktuellen Pläne auflisten lassen.
- Als Benutzer möchte ich mir in einer anderen Ansicht alle abgelaufenen Pläne auflisten lassen.
- Als Planer möchte ich aus Plänen Vorlagen erstellen, um sie für zukünftige Pläne wiederverwenden zu können.
- Als Planer möchte ich beim Anlegen eines Planes eine Vorlage aus der Liste der existieren Vorlagen auswählen können.
  - Dabei möchte auswählen, welche Inhalte aus der Vorlage für meinen neuen Plan übernommen werden sollen. (Arbeitsplätze, Qualifikationszuordnungen und Mitarbeiterzuordnungen)
  - Nach Auswahl einer Vorlage ist nur noch das Startdatum auswählbar. Das Startdatum ergibt sich aus der Vorlagendefinition.

**Plannung**

- Als Planer möchte ich per Drag & Drop meine Arbeitsplätze auf das Zeitraster des zu planenden Tages ziehen, um eine Schicht für
  diesen Arbeitsplatz zu definieren.
  - Nach dem Platzieren auf dem Zeitraster wird die Schicht mit der Standardschichtlänge und Standardbesetzung des Arbeitsplatzes
    dargestellt.
- Als Planer möchte die Länge einer Schicht durch Ziehen auf den Zeitraster verändern können.
- Als Planer möchte die Besetzung einer Schicht durch Drag & Drop der Besetzungen verändern können.
  - Besetzungen füge ich hinzu, indem ich eine Qualifikation aus der Sidebar auf die Schicht ziehe.
  - Besetzungen entferne ich, indem ich eine Qualifikation aus der Schicht herausziehe.
- Als Planer möchte ich mir nach Klicken auf eine Schicht die Mitarbeiter anzeigen lassen können, die aufgrund ihrer Verfügbarkeiten und Qualifikationen, die diese Schicht erfordert in Frage kommen.
  - Mitarbeiter, die bereits in einem anderen Plan in diesem Zeitraum eingeteilt sind, werden separat in der Sidebar aufgelistet oder
    optisch anders dargestellt.
  - Entschließt sich der Planer trotzdem, einen solchen Mitarbeiter einzuteilen, wird ihm als Hilfe ein Konfliktdialog angezeigt, der ihm folgende Entscheidungsmöglichkeiten anbietet:
      1. Mitarbeiter in dieser Schicht einplanen und aus dem anderen Plan löschen?
         - Die Planer des betroffenen Planes und der betroffene Mitarbeiter werden hierüber informiert. (siehe Punkt Benachrichtigungen)
      2. Mitarbeiter nicht in dieser Schicht einplanen?
         - Der Mitarbeiter wird wieder aus der Schicht entfernt.
- Als Planer möchte ich mir nach Klicken auf einen Besetzungsplatzhalter einer Schicht die Mitarbeiter anzeigen lassen, die aufgrund ihrer Verfügbarkeiten und der Qualifikation, die diese Besetzung erfordert in Frage kommen.
  - Mitarbeiter, die bereits in einem anderen Plan in diesem Zeitraum eingeteilt sind, werden separat in der Sidebar aufgelistet oder
    optisch anders dargestellt.
  - Entschließt sich der Planer trotzdem, einen solchen Mitarbeiter einzuteilen, wird ihm als Hilfe ein Konfliktdialog angezeigt, der ihm folgende Entscheidungsmöglichkeiten anbietet:
	      1. Mitarbeiter in dieser Schicht einplanen und aus dem anderen Plan löschen?
	         - Die Planer des betroffenen Planes und der betroffene Mitarbeiter werden hierüber informiert. (siehe Punkt Benachrichtigungen)
	      2. Mitarbeiter nicht in dieser Schicht einplanen?
	         - Der Mitarbeiter wird wieder aus der Schicht entfernt.
  - Mitarbeiter, die bereits in dem aktuellen Plan in diesem Zeitraum anderweitig eingeteilt sind, werden separat in der Sidebar aufgelistet oder optisch anders dargestellt.
  - Entschließt sich der Planer trotzdem, einen solchen Mitarbeiter einzuteilen, wird ihm als Hilfe ein Konfliktdialog angezeigt, der ihm folgende Entscheidungsmöglichkeiten anbietet:
      1. Mitarbeiter in dieser Schicht einplanen und aus der anderen Einteilung/Besetzung löschen?
         - Bemerkung: der Mitarbeiter ist an dieser Stelle entweder bereits in der gleichen Schicht für eine andere Besetzung eingeteilt, oder er ist in einer anderen Schicht des gleichen Plans für eine Besetzung vorgesehen.
      2. Mitarbeiter nicht in dieser Schicht einplanen?
         - Der Mitarbeiter wird wieder aus der Schicht entfernt.
- Als Planer möchte ich mir nach Klicken auf einen Mitarbeiter in der Sidebar Besetzungsvorschläge anzeigen lassen, die für den Mitarbeiter aufgrund seiner Qualifikation und Verfügbarkeiten in Frage kommen (nicht zutreffende Schichten und Qualifikation werden ausgegraut).
  - Für Schichten, bei denen der Mitarbeiter bereits für eine Qualifikation eingeteilt bin, gibt es zwei Punkte, die zu unterscheiden sind:
        1. falls es weitere Besetzungen gibt, für die der Mitarbeiter qualifiziert ist, wird die Schicht nicht ausgegraut und die in Frage kommenden Besetzung optisch markiert
        2. falls es keine weiteren in Frage kommende Besetzung gibt, ist die Schicht inklusive Besetzungen ausgegraut
  - Wenn der Mitarbeiter schon für eine andere zeitgleiche Schicht eingeteilt ist, aber für eine Besetzung einer anderen Schicht ebenfalls die Qualifikation besitzt, wird diese andere Schicht nicht ausgegraut.
- Als Planer möchte ich durch Drag&Drop einen Mitarbeiter auf eine Besetzung einer Schicht einteilen und dabei die gleichen optischen Markierungen sehen, wie beim Klicken auf den Mitarbeiter
- Wenn der Mitarbeiter für eine Schicht eingeplant wird und ein Konflikt zu einer bestehenden Einteilung auftritt, wird dem Planer als Hilfe ein Konfliktdialog angezeigt, der ihm folgende Entscheidungsmöglichkeiten anbietet:
	      1. Mitarbeiter in dieser Schicht/Besetzung einplanen und aus der anderen Schicht/Besetzung löschen?
	      2. Mitarbeiter nicht in dieser Schicht/Besetzung einplanen?
	         - Der Mitarbeiter wird wieder aus der Schicht/Besetzung entfernt.

**Shift Trading**

- unter shift trading wird die Möglichkeit des Schichttausches gefasst
- wenn ein Mitarbeiter für eine Schicht geplant wurde, aber diese gern tauschen möchte, kann er den Termin zur Verfügung stellen
- die Zurverfügungstellung kann er an alle oder nur verfügbare/qualifizierte adressieren
- Interessenten können sich die Schicht zuordnen
- die Anfrage kann mehrfach gesendet werden, wenn sich keiner auf die erste Anfrage meldet
- zu überlegen ist, inwieweit der Manager dem Tausch zustimmen muss
- weiterhin wurde angefragt, ob ein teilweises Übernehmen möglich ist

**Reporting**

- die Applikation unterscheidet nicht in "Wer darf welchen Plan bearbeiten?"; dies wird über ein Aktivitätslog in Form einer sozialen Kontrolle durchgeführt
- aus den erstellten Plänen können die verschiedenen Ansichten erstellt werden; für jede Ansicht ist eine Druckversion in Form eines PDF-Dokuments vorgesehen
- für Planer sind unterschiedliche Sichten nach Mitarbeitern oder Arbeitsplätzen vorgesehen
- Mitarbeitern wird fortlaufend ein aktueller Arbeitsplan mit Kennzeichnung von Nichtverfügbarkeiten angeboten

##Tags

- die Applikation kennt keine vordefinierten Kategorisierungen für organisationstechnische oder geografisch Aspekte
- dies soll über freidefinierbare Suchbegriffe dem Unternehmen überlassen werden
- die Applikation bietet in jeder Ansicht eine Live-Filter-Funktion

##Messaging Center

**System notifications**

- als system notifications werden alle Meldungen gesehen, die durch system-definierte Ereignisse ausgelöst werden
- solche Ereignisse sind:
  - Mitarbeiter wurde für eine Schicht geplant -> Meldung an Mitarbeiter
  - Mitarbeiter wurde aus einem Plan gelöscht -> Meldung an Mitarbeiter
  - Mitarbeiter wird über bevorstehenden Schichtbeginn informiert (kann individuell eigestellt werden; bis zu 2 Erinnerungen möglich)
  - Mitarbeiter hat seine Verfügbarkeit für einen bereits geplanten Zeitraum verändert -> Meldung an Planer
  - jemand hat einen Plan geändert, dessen Ersteller er nicht war -> Meldung an Planer/Ersterfasser
  - es liegt kein Plan mehr vor -> Meldung an Planer

**Communication**

- hier werden die freien Nachrichten zusammengefasst, die
  - der Admin an alle Benutzer schicken kann, um über Ereignisse zu benachrichtigen (Wartungen etc.)
  - ein Planer an alle (nicht verplanten) Mitarbeiter schicken kann, wenn ihm für einen Plan noch Leute fehlen
  - ein Planer an einzelne Mitarbeiter schicken kann, um mit ihnen Einsätze zu kommunizieren
  - ein Mitarbeiter an einzelne oder alle Mitarbeiter, wenn er für einen Einsatz Ersatz sucht und Tausch anbietet
- es erfolgt eine Ansicht der Nachrichtenbox im Dashboard unter Markierung der Quelle und der Adressaten (Einzel- oder Gruppennachricht)

##Integration

**Ist-Zeiten**

- es ist vorgesehen, dass neben der Planung eine einfache Variante der Ist-Zeiten-Erfassung möglich ist
- in diese Ist-Zeitenerfassung lässt sich auch die Auswertung von Fehlzeiten wie Urlaub, Krankheit etc. realisieren
- wenn eine generische Lösung für die Trennung und Kategorisierung von Nicht-Verfügbarkeiten gefunden wurde, ist eine Darstellung von Urlaubsplänen möglich

**Interfaces**

- mit der Realisierung der Ist-Zeiten-Erfassung bietet sich an, diese auch in geeigneter Weise anderen Systemen wie Lohn und Gehalt zur Verfügung zu stellen
- wie zuvor schon erwähnt ist bereits jetzt eine Schnittstelle für den Im- und Export von Mitarbeitern vorhanden

**API's**

- es soll grundsätzlich die Möglichkeit bestehen, mit anderen Programmen (z.B. iPhone-App etc.) auf die Applikationsdaten zu zugreifen
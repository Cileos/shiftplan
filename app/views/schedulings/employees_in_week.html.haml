- title filter.caption, false

%table#calendar.calendar.employee-in-week.schedulings{class: filter.range, data: filter.table_metadata}
  %thead
    %tr
      %th
        = render 'week_switch', filter: filter
      - filter.formatted_days.each do |full, date, abbr|
        %th
          = abbr_tag(abbr, full, class: 'day_name')
          %div.date-without-year= date
  %tbody{ class: editable_class }
    - filter.employees.each do |employee|
      %tr{data: { :'employee-id' => employee.id }}
        %th.employee
          = avatar(employee.user, employee, :tiny)
          %span.employee_name= employee.name
          .wwt_diff
            %span.weekly_working_time
              = translate_action(:hours) + '/'
              %abbr{title: translate_action(:wwt_long)}
                = translate_action(:wwt_short)
            %abbr.weekly_working_time{title: translate_action(:hours) + '/' + translate_action(:wwt_long)}
              ='h/' + translate_action(:wwt_short)
            = filter.wwt_diff_for(employee)
        - filter.days.each do |day|
          = filter.render_cell_for_day day, employee
    %tr
      %th.employee
        %span.employee_name= t(:'schedulings.missing_employee')
      - filter.days.each do |day|
        = filter.render_cell_for_day day, nil

- sidebar do
  = collapsible(t('schedulings.legend'), id: 'legend-toggle', class: 'calendar-legend') do
    #legend= filter.legend

<<<<<<< Updated upstream
<h3><%= t(:new_workplace) %></h3>

<% form_for Workplace.new do |f| %>
=======
<script type="text/javascript">
$(document).ready(function() {
  $('#required_qualifications input[type=checkbox]').click(function() {
    var element = $(this);

    if(element.is(':checked')) {
      var next_id_match = $('#staff_requirements .staff_requirement_container:last-child .required_quantity').eq(0).attr('id').match(/workplace_workplace_requirements_attributes_(\d+)_quantity/);
      var next_id = next_id_match ? parseInt(next_id_match[1]) + 1 : 0;

      var template = new EJS({ url: '/javascripts/shiftplan/staff_requirements/staff_requirement.ejs' });
  		var html = template.render({
  		  next_id: next_id,
  		  qualification_id: element.val(),
  		  qualification_name: element.siblings('label').eq(0).html(),
  		  required_quantity: 1
  		});
  		$('#staff_requirements').append(html);
    } else {
      var clicked_id_match = $('#workplace_requirements_' + element.val() + ' .required_quantity').eq(0).attr('id').match(/workplace_workplace_requirements_attributes_(\d+)_quantity/);
      var clicked_id = clicked_id_match ? parseInt(clicked_id_match[1]) : 0;
      $('#workplace_requirements_' + element.val()).append('<input type="hidden" name="workplace[workplace_requirements_attributes][' + clicked_id + '][_delete]" value="1" />').hide();
    }
  });
});
</script>

<% form_for Workplace.first do |f| %>
>>>>>>> Stashed changes
  <fieldset>
  	<fieldset>
  	  <div>
  	    <%= f.label :name %>
  	    <%= f.text_field :name %>
  	  </div>
  	  <div>
  	    <%= f.label :active %>
  	    <%= f.check_box :active, {}, 1 %>
  	  </div>
  	  <div>
  	    <%= f.label :default_shift_length %>
  	    <%= f.text_field :default_shift_length %>
  	  </div>
  	</fieldset>
  	<fieldset>
  	  <legend><%= t(:default_staffing, :scope => :'activerecord.attributes.workplace') %></legend>
  	  <div>
  	    <%= f.label :qualifications %>
  	    <ul id="required_qualifications" class="qualifications">
  	      <% Qualification.all.each do |qualification| -%>
  	        <li>
  	          <%= check_box_tag 'workplace[qualification_ids][]', qualification.id, f.object.needs_qualification?(qualification), :id => "workplace_qualification_#{qualification.id}", :class => 'workplace_qualifications' %><%= f.label "qualification_#{qualification.id}", qualification.name %>
  	        </li>
  	      <% end -%>
  	    </ul>
  	  </div>
  	  <%= render :partial => 'workplace_requirements_fields', :locals => { :workplace => f.object } %>
  	</fieldset>
  	<%= f.submit t(:save) %>
	</fieldset>
<% end %>
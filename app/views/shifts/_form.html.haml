- if shift.new_record?
  - shift.start_hour = 8
  - shift.end_hour   = 16
- url = nested_resources_for(shift)

= simple_nested_form_for shift, url: url,
  remote: true, html: { class: 'form-horizontal' } do |f|
  .inputs
    = f.input :start_hour,   collection: 0..23, include_blank: false, input_html: { tabindex: 1 }
    = f.input :start_minute, collection: [0,15,30,45], include_blank: false, input_html: { tabindex: 2 }
    = f.input :end_hour,     collection: 0..24, include_blank: false, input_html: { tabindex: 3 }
    = f.input :end_minute,   collection: [0,15,30,45], include_blank: false, input_html: { tabindex: 4 }
    = f.input :day,          collection: days_for_select, include_blank: false, input_html: { tabindex: 5 }
    = f.association :team,   collection: shift.plan_template.organization.teams, include_blank: false, input_html: { tabindex: 6 }

    %h4= ta(:demands)

    - unless current_organization.qualifications.present?
      %p= t(:'qualifications.no_qualifications_present')
      %p= t(:'qualifications.goto_qualifications')
      = link_to ta(:qualifications), nested_resources_for(current_organization) + [:qualifications], class: 'button'

    = f.simple_fields_for :demands do |df|
      = df.input :quantity, input_html: { tabindex: 7 }
      = df.association :qualification, collection: shift.plan_template.organization.qualifications, input_html: { tabindex: 8 }

  %p= f.link_to_add ta(:add_demand), :demands, class: 'button', data: { icon: i(:add) }

  .actions
    - if create_or_update == :update
      = link_to ti(:destroy), url, remote: true, method: :delete, class: 'button button-warning delete'
    = f.responsive_submit_button tabindex: 9 do
      %i.icon-ok-circle.icon-white
      = ta create_or_update
